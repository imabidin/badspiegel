<?php

/**
 * @version V.2.3.0
 */

?>

<?php

// All variables are now available globally from modal.php
// No need to define them here anymore!

// All attribute variables are now available globally from modal.php
// No need to define them here anymore!

// CONDITIONAL DEBUG OUTPUT - controlled by $modal_debug_enabled
if ($modal_debug_enabled) {
    // DEBUG: Show all business logic variables
    echo "<!-- DEBUG Business Logic Variables: -->";
    echo "<!-- show_spiegelkante_info: " . (isset($show_spiegelkante_info) ? ($show_spiegelkante_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_lichtflaechen_info: " . (isset($show_lichtflaechen_info) ? ($show_lichtflaechen_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_korpuskante_info: " . (isset($show_korpuskante_info) ? ($show_korpuskante_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_offene_faecher_info: " . (isset($show_offene_faecher_info) ? ($show_offene_faecher_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";

    // DEBUG: Show category variables used in business logic
    echo "<!-- DEBUG Category Variables for Business Logic: -->";
    echo "<!-- is_badspiegel: " . (isset($is_badspiegel) ? ($is_badspiegel ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_badspiegel_mit_holzrahmen: " . (isset($is_badspiegel_mit_holzrahmen) ? ($is_badspiegel_mit_holzrahmen ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_badspiegel_mit_beleuchtung: " . (isset($is_badspiegel_mit_beleuchtung) ? ($is_badspiegel_mit_beleuchtung ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_spiegelschrank: " . (isset($is_spiegelschrank) ? ($is_spiegelschrank ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_spiegelschrank_mit_faechern: " . (isset($is_spiegelschrank_mit_faechern) ? ($is_spiegelschrank_mit_faechern ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";

    // DEBUG: Show Dachschrägen-specific categories
    echo "<!-- DEBUG Dachschrägen Categories: -->";
    echo "<!-- is_badspiegel_fuer_dachschraege: " . (isset($is_badspiegel_fuer_dachschraege) ? ($is_badspiegel_fuer_dachschraege ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_spiegelschraenke_fuer_dachschraege: " . (isset($is_spiegelschraenke_fuer_dachschraege) ? ($is_spiegelschraenke_fuer_dachschraege ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";

    // DEBUG: Show what categories are actually available
    echo "<!-- DEBUG Category Lookup Data: -->";
    $cat = get_modal_category_lookup();
    echo "<!-- Category data: " . json_encode(array_keys($cat)) . " -->";

    // DEBUG: Show attribute checks
    // echo "<!-- DEBUG Attributes: faecherposition_seitlich=" . ($has_faecherposition_seitlich ? 'T' : 'F') . " faecherposition_unten=" . ($has_faecherposition_unten ? 'T' : 'F') . " faecherposition_mittig=" . ($has_faecherposition_mittig ? 'T' : 'F') . " -->";
}
?>

<div class="">
    <?php
    // Show specific images based on category match
    if ($is_badspiegel_fuer_dachschraege):
        echo "<!-- Badspiegel für Dachschrägen -->";
        echo do_shortcode('[img id="4999" size="thumbnail" class="d-block"]'); // Badspiegel für Dachschrägen
    elseif ($is_spiegelschraenke_fuer_dachschraege):
        echo "<!-- Spiegelschränke für Dachschrägen -->";
        echo do_shortcode('[img id="5091" size="thumbnail" class="d-block"]'); // Spiegelschränke für Dachschrägen
    else:
        echo "<!-- NO MATCH FOUND -->";
    endif;
    ?>

    <div class="callout callout-primary mb col-lg-6">
        <span class="lead">Höhe links</span>
    </div>

    <h5 class="mb-3">
        <i class="fa-light fa-sharp fa-ruler me-2"></i>Maßangaben
    </h5>
    <ul class="mb-0">
        <?php if ($show_spiegelkante_info): ?>
            <li>Maße sind von einer Spiegelkante bis zur nächsten Kante</li>
        <?php endif; ?>
        <?php if ($show_lichtflaechen_info): ?>
            <li>Lichtflächen / satinierte Flächen sind inklusive</li>
        <?php endif; ?>
        <?php if ($show_korpuskante_info): ?>
            <li>Maße sind von einer Korpuskante bis zur nächsten Kante</li>
        <?php endif; ?>
        <?php if ($show_offene_faecher_info): ?>
            <li>Etwaige offene Fächer sind in den Maßen inklusive</li>
        <?php endif; ?>
        <li><span class="fw-semibold">Toleranz fertigungsbedingt ± 2–3 mm möglich</span></li>
    </ul>
</div>