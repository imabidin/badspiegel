<?php

/**
 * @version V.2.3.0
 */

?>

<?php

// All variables are now available globally from modal.php
// No need to define them here anymore!

// All attribute variables are now available globally from modal.php
// No need to define them here anymore!

// CONDITIONAL DEBUG OUTPUT - controlled by $modal_debug_enabled
if ($modal_debug_enabled) {
    // DEBUG: Show all business logic variables
    echo "<!-- DEBUG Business Logic Variables: -->";
    echo "<!-- show_spiegelkante_info: " . (isset($show_spiegelkante_info) ? ($show_spiegelkante_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_lichtflaechen_info: " . (isset($show_lichtflaechen_info) ? ($show_lichtflaechen_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_korpuskante_info: " . (isset($show_korpuskante_info) ? ($show_korpuskante_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- show_offene_faecher_info: " . (isset($show_offene_faecher_info) ? ($show_offene_faecher_info ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";

    // DEBUG: Show category variables used in business logic
    echo "<!-- DEBUG Category Variables for Business Logic: -->";
    echo "<!-- is_badspiegel: " . (isset($is_badspiegel) ? ($is_badspiegel ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_badspiegel_mit_holzrahmen: " . (isset($is_badspiegel_mit_holzrahmen) ? ($is_badspiegel_mit_holzrahmen ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_badspiegel_mit_beleuchtung: " . (isset($is_badspiegel_mit_beleuchtung) ? ($is_badspiegel_mit_beleuchtung ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_spiegelschrank: " . (isset($is_spiegelschrank) ? ($is_spiegelschrank ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";
    echo "<!-- is_spiegelschrank_mit_faechern: " . (isset($is_spiegelschrank_mit_faechern) ? ($is_spiegelschrank_mit_faechern ? 'TRUE' : 'FALSE') : 'NOT_SET') . " -->";

    // DEBUG: Show what categories are actually available
    echo "<!-- DEBUG Category Lookup Data: -->";
    $cat = get_modal_category_lookup();
    echo "<!-- Category data: " . json_encode(array_keys($cat)) . " -->";

    // DEBUG: Show attribute checks
    // echo "<!-- DEBUG Attributes: faecherposition_seitlich=" . ($has_faecherposition_seitlich ? 'T' : 'F') . " faecherposition_unten=" . ($has_faecherposition_unten ? 'T' : 'F') . " faecherposition_mittig=" . ($has_faecherposition_mittig ? 'T' : 'F') . " -->";
}
?>

<div class="">
    <?php
    // Show specific images based on category match
    if ($is_badspiegel_mit_leuchte):
        echo "<!-- Badspiegel mit Leuchte -->";
        echo do_shortcode('[img id="6003" size="thumbnail"]'); // Badspiegel mit Leuchte
    elseif ($is_badspiegel_mit_rahmen):
        echo "<!-- Badspiegel mit Rahmen -->";
        echo do_shortcode('[img id="6004" size="thumbnail"]'); // Badspiegel mit Rahmen
    elseif ($is_badspiegel_mit_fernseher):
        echo "<!-- Badspiegel mit Fernseher -->";
        echo do_shortcode('[img id="6005" size="thumbnail"]'); // Badspiegel mit Fernseher
    elseif ($is_badspiegel_fuer_dachschraege):
        echo "<!-- Badspiegel für Dachschräge -->";
        echo do_shortcode('[img id="6006" size="thumbnail"]'); // Badspiegel für Dachschräge
    elseif ($is_badspiegel_mit_abgerundeten_ecken):
        echo "<!-- Badspiegel mit abgerundeten Ecken -->";
        echo do_shortcode('[img id="6007" size="thumbnail"]'); // Badspiegel mit abgerundeten Ecken
    elseif ($is_badspiegel_abgerundet):
        echo "<!-- Badspiegel abgerundet -->";
        echo do_shortcode('[img id="6008" size="thumbnail"]'); // Badspiegel abgerundet
    elseif ($is_badspiegel_mit_rundbogen):
        echo "<!-- Badspiegel mit Rundbogen -->";
        echo do_shortcode('[img id="6009" size="thumbnail"]'); // Badspiegel mit Rundbogen
    elseif ($is_badspiegel_oval):
        echo "<!-- Badspiegel oval -->";
        echo do_shortcode('[img id="6010" size="thumbnail"]'); // Badspiegel oval
    elseif ($is_hollywood_spiegel):
        echo "<!-- Hollywood Spiegel -->";
        echo do_shortcode('[img id="6011" size="thumbnail"]'); // Hollywood Spiegel
    elseif ($is_klappspiegel):
        echo "<!-- Klappspiegel -->";
        echo do_shortcode('[img id="6012" size="thumbnail"]'); // Klappspiegel
    elseif ($is_spiegel_raumteiler):
        echo "<!-- Spiegel Raumteiler -->";
        echo do_shortcode('[img id="6013" size="thumbnail"]'); // Spiegel Raumteiler
    elseif ($is_spiegelschraenke_fuer_dachschraege):
        echo "<!-- Spiegelschränke für Dachschräge -->";
        echo do_shortcode('[img id="6017" size="thumbnail"]'); // Spiegelschränke für Dachschräge
    elseif ($is_spiegelschraenke_mit_faechern):
        echo "<!-- Spiegelschränke mit Fächern -->";
        // Show different images based on Fächerposition attribute
        if ($has_faecherposition_seitlich):
            echo "<!-- Fächerposition seitlich -->";
            echo do_shortcode('[img id="6018" size="thumbnail"]'); // Spiegelschränke mit Fächern seitlich
        elseif ($has_faecherposition_unten):
            echo "<!-- Fächerposition unten -->";
            echo do_shortcode('[img id="6022" size="thumbnail"]'); // Spiegelschränke mit Fächern unten
        elseif ($has_faecherposition_mittig):
            echo "<!-- Fächerposition mittig -->";
            echo do_shortcode('[img id="6023" size="thumbnail"]'); // Spiegelschränke mit Fächern mittig
        else:
            echo "<!-- Fächerposition ohne -->";
            echo do_shortcode('[img id="6018" size="thumbnail"]'); // Default Spiegelschränke mit Fächern
        endif;
    elseif ($is_unterschraenke):
        echo "<!-- Unterschränke -->";
        echo do_shortcode('[img id="6019" size="thumbnail"]'); // Unterschränke
    elseif ($is_sideboards):
        echo "<!-- Sideboards -->";
        echo do_shortcode('[img id="6020" size="thumbnail"]'); // Sideboards
    elseif ($is_lowboards):
        echo "<!-- Lowboards -->";
        echo do_shortcode('[img id="6021" size="thumbnail"]'); // Lowboards
    elseif ($is_badspiegel_ohne_beleuchtung):
        echo "<!-- Badspiegel ohne Beleuchtung -->";
        echo do_shortcode('[img id="6001" size="thumbnail"]'); // Badspiegel ohne Beleuchtung
    elseif ($is_badspiegel_mit_beleuchtung):
        echo "<!-- Badspiegel mit Beleuchtung -->";
        echo do_shortcode('[img id="6002" size="thumbnail"]'); // Badspiegel mit Beleuchtung
    elseif ($is_spiegelschraenke_ohne_beleuchtung):
        echo "<!-- Spiegelschränke ohne Beleuchtung -->";
        echo do_shortcode('[img id="6014" size="thumbnail"]'); // Spiegelschränke ohne Beleuchtung
    elseif ($is_spiegelschraenke_mit_beleuchtung):
        echo "<!-- Spiegelschränke mit Beleuchtung -->";
        echo do_shortcode('[img id="6015" size="thumbnail"]'); // Spiegelschränke mit Beleuchtung
    elseif ($is_spiegelschraenke_mit_leuchte):
        echo "<!-- Spiegelschränke mit Leuchte -->";
        echo do_shortcode('[img id="6016" size="thumbnail"]'); // Spiegelschränke mit Leuchte
    else:
        echo "<!-- NO MATCH FOUND -->";
    endif;
    ?>
    <h5 class="mb-3">
        <i class="fa-light fa-sharp fa-ruler me-2"></i>Maßangaben
    </h5>
    <ul class="mb-0">
        <?php if ($show_spiegelkante_info): ?>
        <li>Maße sind von einer Spiegelkante bis zur nächsten Kante</li>
        <?php endif; ?>
        <?php if ($show_lichtflaechen_info): ?>
        <li>Lichtflächen / satinierte Flächen sind inklusive</li>
        <?php endif; ?>
        <?php if ($show_korpuskante_info): ?>
        <li>Maße sind von einer Korpuskante bis zur nächsten Kante</li>
        <?php endif; ?>
        <?php if ($show_offene_faecher_info): ?>
        <li>Etwaige offene Fächer sind in den Maßen inklusive</li>
        <?php endif; ?>
        <li><span class="fw-semibold">Toleranz fertigungsbedingt ± 2–3 mm möglich</span></li>
    </ul>
</div>

<?php if ($is_spiegel_raumteiler): ?>
<div class="callout callout-primary mt">
    <h5 class="mb-2">
        <i class="fa-light fa-sharp fa-info-circle me-2"></i>Hinweis
    </h5>
    <p class="mb-0">Da die angegebene Höhe ohne Füße ist, rechnen Sie für die Gesamthöhe bitte die <span class="fw-semibold">Fußhöhe von 10 cm</span> hinzu. Andere Fußhöhen sind auf Anfrage möglich.</p>
</div>
<?php endif; ?>

<?php if (!$is_spiegel_raumteiler && !$is_spiegelschrank): ?>
<div class="callout callout-info mt">
    <h5 class="mb-2">Tipp für Nischen</h5>
    <p class="mb-0">Planen Sie für Nischen <span class="fw-semibold">ca. 4 cm Freiraum nach oben</span> ein, damit die Montage problemlos möglich ist.</p>
</div>
<?php endif; ?>